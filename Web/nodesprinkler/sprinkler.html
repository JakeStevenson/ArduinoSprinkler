<html>
	<head>
		<style>
			.turnedOn{
				background:#000;
			}
		</style>
		<script src="zepto.min.js"></script>
		<script>
			Zepto(function($){

				$("#all").click(function(){
					callZone('1', 'ON');
					window.setTimeout(function(){
						callZone('2', 'ON');
						window.setTimeout(function(){
							callZone('3', 'ON');
							window.setTimeout(function(){
								callZone('4', 'ON');
							}, 10000);
						}, 10000);
					}, 10000);
				});

				$(".zoneButton").click(function(){
					var zone = $(this).val();
					if($(this).hasClass("turnedON")){
						callZone(zone, 'OFF');
						return;
					}
					callZone(zone, 'ON');
				});


				function clearZones(){
					$(".zoneButton").each(function(){
						$(this).removeClass('turnedON');
					});
				}
				function callZone(zone, onOrOff){
					console.log(zone);
					$.ajax({
						type: 'GET',
						url: '/'+zone+'/'+onOrOff,
						success: function(){
							clearZones();
							console.log("ZONE" + zone + " response");
							if(onOrOff==="ON"){
								$("#Zone"+zone).addClass('turnedON');
							}
							else {
								$("#Zone".zone).removeClass('turnedON');
							}
						}
					});

				}
			});
		</script>
	</head>
	<body>
		<h1>Run All</h1>
		<input type="button" id="all" value="Go"/>

		<h1>Sprinklers</h1>
	 	<input class="zoneButton" type="button" id="Zone1" value="1"/>	
	 	<input class="zoneButton" type="button" id="Zone2" value="2"/>	
	 	<input class="zoneButton" type="button" id="Zone3" value="3"/>	
	 	<input class="zoneButton" type="button" id="Zone4" value="4"/>	
	</body>
</html>
